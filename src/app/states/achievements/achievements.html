<material-content class="achievements"
                  ng-class="{'achievements--no-scroll': achievementsCtrl.achievements.hasActive()}">
  <h3 class="material-display-1">Достижения</h3>
  <div class="achievements-active-background"
       ng-show="achievementsCtrl.achievements.hasActive()"></div>
  <div class="achievements-new-card">
    <material-card ng-if="!achievementsCtrl.isCardAdding">
      <material-card-title ng-click="achievementsCtrl.openAddingCard()"
                           ng-class="{'clickable': !achievementsCtrl.isCardAdding}">
        <material-card-title-text>
          <span class="material-headline"><i class="material-icons">add</i>Новое достижение</span>
        </material-card-title-text>
      </material-card-title>
    </material-card>
    <achievement-card ng-if="achievementsCtrl.isCardAdding"
                      achievement="achievementsCtrl.newAchievement"
                      save-achievement="achievementsCtrl.saveNewAchievement(achievement, $event)"
                      close-achievement="achievementsCtrl.closeAddingCard()"></achievement-card>
  </div>
  <div class="achievements-cards">
    <div class="achievements-card"
         ng-repeat="achievement in achievementsCtrl.achievements.cards | orderBy:'obj.name' track by achievement.obj.id"
         ng-switch="achievement.$active">
      <achievement-card
        ng-switch-when="true"
        active="achievement.$active"
        achievement="achievement.objCopy"
        save-achievement="achievementsCtrl.saveAchievement(achievement, $event)"
        close-achievement="achievement.closeEditingAchievement($event)"></achievement-card>
      <material-card
        ng-switch-default>
        <material-card-title>
          <material-card-title-text>
            <span class="material-headline" ng-bind="achievement.obj.name"></span>
            <span class="material-subhead">Кол-во кармы: {{achievement.obj.karma}}</span>
          </material-card-title-text>
          <material-card-title-media ng-if="achievement.obj.icon">
            <div class="material-media-med">
              <img src="data:image/png;base64,{{achievement.obj.icon}}" alt=""/>
            </div>
          </material-card-title-media>
        </material-card-title>
        <material-card-content>
          <p ng-bind="achievement.obj.description"></p>
        </material-card-content>
        <material-card-actions>
          <material-button class="material-icon-button"
                           title="Просмотреть информацию о достижении"
                           ng-click="achievementsCtrl.goToAchievement(achievement.obj.id)">
            <i class="material-icons">info</i>
          </material-button>
          <material-button class="material-icon-button"
                           title="Редактировать достижение"
                           ng-click="achievementsCtrl.editAchievement(achievement)">
            <i class="material-icons">edit</i>
          </material-button>
          <material-button class="material-icon-button"
                           title="Удалить достижение"
                           ng-click="achievementsCtrl.deleteAchievement(achievement, $event)">
            <i class="material-icons">delete</i>
          </material-button>
        </material-card-actions>
      </material-card>
    </div>
  </div>
</material-content>
